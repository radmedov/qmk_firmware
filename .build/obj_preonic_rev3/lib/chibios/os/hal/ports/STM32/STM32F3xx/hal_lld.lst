   1              		.cpu cortex-m4
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 2
  11              		.file	"hal_lld.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.hal_lld_init,"ax",%progbits
  16              		.align	1
  17              		.global	hal_lld_init
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	hal_lld_init:
  24              	.LFB280:
  25              		.file 1 "lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c"
   1:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*
   2:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ChibiOS - Copyright (C) 2006..2016 Giovanni Di Sirio
   3:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
   4:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     you may not use this file except in compliance with the License.
   6:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     You may obtain a copy of the License at
   7:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
   8:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****         http://www.apache.org/licenses/LICENSE-2.0
   9:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  10:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     Unless required by applicable law or agreed to in writing, software
  11:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     See the License for the specific language governing permissions and
  14:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     limitations under the License.
  15:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** */
  16:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  17:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /**
  18:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @file    STM32F3xx/hal_lld.c
  19:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @brief   STM32F3xx HAL subsystem low level driver source.
  20:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  *
  21:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @addtogroup HAL
  22:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @{
  23:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  */
  24:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  25:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #include "hal.h"
  26:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  27:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  28:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /* Driver local definitions.                                                 */
  29:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  30:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  31:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  32:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /* Driver exported variables.                                                */
  33:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  34:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  35:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /**
  36:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @brief   CMSIS system core clock variable.
  37:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @note    It is declared in system_stm32f3xx.h.
  38:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  */
  39:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** uint32_t SystemCoreClock = STM32_HCLK;
  40:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  41:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  42:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /* Driver local variables and types.                                         */
  43:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  44:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  45:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  46:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /* Driver local functions.                                                   */
  47:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  48:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  49:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /**
  50:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @brief   Initializes the backup domain.
  51:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @note    WARNING! Changing clock source impossible without resetting
  52:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  *          of the whole BKP domain.
  53:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  */
  54:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** static void hal_lld_backup_domain_init(void) {
  55:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  56:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Backup domain access enabled and left open.*/
  57:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   PWR->CR |= PWR_CR_DBP;
  58:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  59:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Reset BKP domain if different clock source selected.*/
  60:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   if ((RCC->BDCR & STM32_RTCSEL_MASK) != STM32_RTCSEL){
  61:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     /* Backup domain reset.*/
  62:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     RCC->BDCR = RCC_BDCR_BDRST;
  63:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     RCC->BDCR = 0;
  64:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   }
  65:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  66:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* If enabled then the LSE is started.*/
  67:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if STM32_LSE_ENABLED
  68:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if defined(STM32_LSE_BYPASS)
  69:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* LSE Bypass.*/
  70:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->BDCR |= STM32_LSEDRV | RCC_BDCR_LSEON | RCC_BDCR_LSEBYP;
  71:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #else
  72:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* No LSE Bypass.*/
  73:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->BDCR |= STM32_LSEDRV | RCC_BDCR_LSEON;
  74:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
  75:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   while ((RCC->BDCR & RCC_BDCR_LSERDY) == 0)
  76:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ;                                     /* Waits until LSE is stable.   */
  77:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
  78:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  79:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if STM32_RTCSEL != STM32_RTCSEL_NOCLOCK
  80:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* If the backup domain hasn't been initialized yet then proceed with
  81:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****      initialization.*/
  82:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   if ((RCC->BDCR & RCC_BDCR_RTCEN) == 0) {
  83:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     /* Selects clock source.*/
  84:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     RCC->BDCR |= STM32_RTCSEL;
  85:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  86:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     /* RTC clock enabled.*/
  87:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     RCC->BDCR |= RCC_BDCR_RTCEN;
  88:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   }
  89:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif /* STM32_RTCSEL != STM32_RTCSEL_NOCLOCK */
  90:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** }
  91:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  92:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  93:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /* Driver interrupt handlers.                                                */
  94:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  95:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  96:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  97:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /* Driver exported functions.                                                */
  98:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /*===========================================================================*/
  99:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 100:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /**
 101:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @brief   Low level HAL driver initialization.
 102:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  *
 103:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @notapi
 104:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  */
 105:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** void hal_lld_init(void) {
  26              		.loc 1 105 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30 0000 10B5     		push	{r4, lr}
  31              		.cfi_def_cfa_offset 8
  32              		.cfi_offset 4, -8
  33              		.cfi_offset 14, -4
 106:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 107:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Reset of all peripherals.*/
 108:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   rccResetAHB(0xFFFFFFFF);
  34              		.loc 1 108 0
  35 0002 1B4C     		ldr	r4, .L7
  36 0004 4FF0FF31 		mov	r1, #-1
  37 0008 A26A     		ldr	r2, [r4, #40]
  38 000a A162     		str	r1, [r4, #40]
  39 000c 0022     		movs	r2, #0
  40 000e A262     		str	r2, [r4, #40]
 109:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   rccResetAPB1(0xFFFFFFFF);
  41              		.loc 1 109 0
  42 0010 2069     		ldr	r0, [r4, #16]
  43 0012 2161     		str	r1, [r4, #16]
  44 0014 2261     		str	r2, [r4, #16]
 110:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   rccResetAPB2(0xFFFFFFFF);
  45              		.loc 1 110 0
  46 0016 E068     		ldr	r0, [r4, #12]
  47 0018 E160     		str	r1, [r4, #12]
  48 001a E260     		str	r2, [r4, #12]
 111:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 112:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* PWR clock enabled.*/
 113:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   rccEnablePWRInterface(FALSE);
  49              		.loc 1 113 0
  50 001c E169     		ldr	r1, [r4, #28]
  51              	.LBB4:
  52              	.LBB5:
  57:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  53              		.loc 1 57 0
  54 001e 1548     		ldr	r0, .L7+4
  55              	.LBE5:
  56              	.LBE4:
  57              		.loc 1 113 0
  58 0020 41F08051 		orr	r1, r1, #268435456
  59 0024 E161     		str	r1, [r4, #28]
  60              	.LBB7:
  61              	.LBB6:
  57:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  62              		.loc 1 57 0
  63 0026 0168     		ldr	r1, [r0]
  64 0028 41F48071 		orr	r1, r1, #256
  65 002c 0160     		str	r1, [r0]
  60:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     /* Backup domain reset.*/
  66              		.loc 1 60 0
  67 002e 216A     		ldr	r1, [r4, #32]
  68 0030 01F44071 		and	r1, r1, #768
  69 0034 B1F5007F 		cmp	r1, #512
  62:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     RCC->BDCR = 0;
  70              		.loc 1 62 0
  71 0038 1EBF     		ittt	ne
  72 003a 4FF48033 		movne	r3, #65536
  73 003e 2362     		strne	r3, [r4, #32]
  63:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   }
  74              		.loc 1 63 0
  75 0040 2262     		strne	r2, [r4, #32]
  82:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     /* Selects clock source.*/
  76              		.loc 1 82 0
  77 0042 236A     		ldr	r3, [r4, #32]
  78 0044 1B04     		lsls	r3, r3, #16
  79 0046 07D4     		bmi	.L3
  84:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  80              		.loc 1 84 0
  81 0048 236A     		ldr	r3, [r4, #32]
  82 004a 43F40073 		orr	r3, r3, #512
  83 004e 2362     		str	r3, [r4, #32]
  87:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   }
  84              		.loc 1 87 0
  85 0050 236A     		ldr	r3, [r4, #32]
  86 0052 43F40043 		orr	r3, r3, #32768
  87 0056 2362     		str	r3, [r4, #32]
  88              	.L3:
  89              	.LBE6:
  90              	.LBE7:
 114:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 115:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Initializes the backup domain.*/
 116:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   hal_lld_backup_domain_init();
 117:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 118:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if defined(STM32_DMA_REQUIRED)
 119:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   dmaInit();
  91              		.loc 1 119 0
  92 0058 FFF7FEFF 		bl	dmaInit
  93              	.LVL0:
 120:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
 121:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 122:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Programmable voltage detector enable.*/
 123:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if STM32_PVD_ENABLE
 124:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   PWR->CR |= PWR_CR_PVDE | (STM32_PLS & STM32_PLS_MASK);
 125:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif /* STM32_PVD_ENABLE */
 126:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 127:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* SYSCFG clock enabled here because it is a multi-functional unit shared
 128:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****      among multiple drivers.*/
 129:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   rccEnableAPB2(RCC_APB2ENR_SYSCFGEN, TRUE);
  94              		.loc 1 129 0
  95 005c A369     		ldr	r3, [r4, #24]
 130:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 131:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if STM32_HAS_USB
 132:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* USB IRQ relocated to not conflict with CAN.*/
 133:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   SYSCFG->CFGR1 |= SYSCFG_CFGR1_USB_IT_RMP;
  96              		.loc 1 133 0
  97 005e 064A     		ldr	r2, .L7+8
 129:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
  98              		.loc 1 129 0
  99 0060 43F00103 		orr	r3, r3, #1
 100 0064 A361     		str	r3, [r4, #24]
 101              		.loc 1 133 0
 102 0066 1368     		ldr	r3, [r2]
 103 0068 43F02003 		orr	r3, r3, #32
 104 006c 1360     		str	r3, [r2]
 134:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
 135:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** }
 105              		.loc 1 135 0
 106 006e 10BD     		pop	{r4, pc}
 107              	.L8:
 108              		.align	2
 109              	.L7:
 110 0070 00100240 		.word	1073876992
 111 0074 00700040 		.word	1073770496
 112 0078 00000140 		.word	1073807360
 113              		.cfi_endproc
 114              	.LFE280:
 116              		.section	.text.stm32_clock_init,"ax",%progbits
 117              		.align	1
 118              		.global	stm32_clock_init
 119              		.syntax unified
 120              		.thumb
 121              		.thumb_func
 122              		.fpu softvfp
 124              	stm32_clock_init:
 125              	.LFB281:
 136:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 137:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** /**
 138:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @brief   STM32 clocks and PLL initialization.
 139:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @note    All the involved constants come from the file @p board.h.
 140:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @note    This function should be invoked just after the system reset.
 141:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  *
 142:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  * @special
 143:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****  */
 144:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** void stm32_clock_init(void) {
 126              		.loc 1 144 0
 127              		.cfi_startproc
 128              		@ args = 0, pretend = 0, frame = 0
 129              		@ frame_needed = 0, uses_anonymous_args = 0
 130              		@ link register save eliminated.
 145:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 146:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if !STM32_NO_INIT
 147:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* HSI setup, it enforces the reset situation in order to handle possible
 148:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****      problems with JTAG probes and re-initializations.*/
 149:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CR |= RCC_CR_HSION;                  /* Make sure HSI is ON.         */
 131              		.loc 1 149 0
 132 0000 204B     		ldr	r3, .L26
 133 0002 1A68     		ldr	r2, [r3]
 134 0004 42F00102 		orr	r2, r2, #1
 135 0008 1A60     		str	r2, [r3]
 136              	.L10:
 150:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   while (!(RCC->CR & RCC_CR_HSIRDY))
 137              		.loc 1 150 0 discriminator 1
 138 000a 1A68     		ldr	r2, [r3]
 139 000c 9207     		lsls	r2, r2, #30
 140 000e FCD5     		bpl	.L10
 151:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ;                                       /* Wait until HSI is stable.    */
 152:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 153:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* HSI is selected as new source without touching the other fields in
 154:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****      CFGR. Clearing the register has to be postponed after HSI is the
 155:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****      new source.*/
 156:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR &= ~RCC_CFGR_SW;                /* Reset SW */
 141              		.loc 1 156 0
 142 0010 5A68     		ldr	r2, [r3, #4]
 143 0012 22F00302 		bic	r2, r2, #3
 144 0016 5A60     		str	r2, [r3, #4]
 157:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR |= RCC_CFGR_SWS_HSI;            /* Select HSI as internal*/
 145              		.loc 1 157 0
 146 0018 5A68     		ldr	r2, [r3, #4]
 147 001a 5A60     		str	r2, [r3, #4]
 148              	.L11:
 158:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   while ((RCC->CFGR & RCC_CFGR_SWS) != RCC_CFGR_SWS_HSI)
 149              		.loc 1 158 0 discriminator 1
 150 001c 5A68     		ldr	r2, [r3, #4]
 151 001e 12F00C02 		ands	r2, r2, #12
 152 0022 FBD1     		bne	.L11
 159:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ;                                       /* Wait until HSI is selected.  */
 160:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 161:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Registers finally cleared to reset values.*/
 162:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CR &= RCC_CR_HSITRIM | RCC_CR_HSION; /* CR Reset value.              */
 153              		.loc 1 162 0
 154 0024 1968     		ldr	r1, [r3]
 155 0026 01F0F901 		and	r1, r1, #249
 156 002a 1960     		str	r1, [r3]
 163:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR = 0;                            /* CFGR reset value.            */
 157              		.loc 1 163 0
 158 002c 5A60     		str	r2, [r3, #4]
 164:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 165:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if STM32_HSE_ENABLED
 166:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* HSE activation.*/
 167:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if defined(STM32_HSE_BYPASS)
 168:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* HSE Bypass.*/
 169:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CR |= RCC_CR_HSEON | RCC_CR_HSEBYP;
 170:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #else
 171:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* No HSE Bypass.*/
 172:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CR |= RCC_CR_HSEON;
 159              		.loc 1 172 0
 160 002e 1A68     		ldr	r2, [r3]
 161 0030 42F48032 		orr	r2, r2, #65536
 162 0034 1A60     		str	r2, [r3]
 163              	.L12:
 173:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
 174:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   while (!(RCC->CR & RCC_CR_HSERDY))
 164              		.loc 1 174 0 discriminator 1
 165 0036 1A68     		ldr	r2, [r3]
 166 0038 9003     		lsls	r0, r2, #14
 167 003a FCD5     		bpl	.L12
 175:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ;                                       /* Waits until HSE is stable.   */
 176:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
 177:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 178:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if STM32_LSI_ENABLED
 179:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* LSI activation.*/
 180:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CSR |= RCC_CSR_LSION;
 168              		.loc 1 180 0
 169 003c 5A6A     		ldr	r2, [r3, #36]
 170 003e 42F00102 		orr	r2, r2, #1
 171 0042 5A62     		str	r2, [r3, #36]
 172              	.L13:
 181:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   while ((RCC->CSR & RCC_CSR_LSIRDY) == 0)
 173              		.loc 1 181 0 discriminator 1
 174 0044 5A6A     		ldr	r2, [r3, #36]
 175 0046 9107     		lsls	r1, r2, #30
 176 0048 FCD5     		bpl	.L13
 182:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ;                                       /* Waits until LSI is stable.   */
 183:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
 184:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 185:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Clock settings.*/
 186:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR  = STM32_MCOSEL    | STM32_USBPRE    | STM32_PLLMUL   |
 177              		.loc 1 186 0
 178 004a 0F4A     		ldr	r2, .L26+4
 179 004c 5A60     		str	r2, [r3, #4]
 187:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****                STM32_PLLSRC    | STM32_PPRE1     | STM32_PPRE2    |
 188:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****                STM32_HPRE;
 189:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR2 = STM32_ADC34PRES | STM32_ADC12PRES | STM32_PREDIV;
 180              		.loc 1 189 0
 181 004e 4FF40452 		mov	r2, #8448
 182 0052 DA62     		str	r2, [r3, #44]
 190:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR3 = STM32_UART5SW   | STM32_UART4SW   | STM32_USART3SW |
 183              		.loc 1 190 0
 184 0054 3022     		movs	r2, #48
 185 0056 1A63     		str	r2, [r3, #48]
 191:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****                STM32_USART2SW  | STM32_I2C2SW    | STM32_I2C1SW   |
 192:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****                STM32_USART1SW;
 193:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 194:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if STM32_ACTIVATE_PLL
 195:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* PLL activation.*/
 196:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CR   |= RCC_CR_PLLON;
 186              		.loc 1 196 0
 187 0058 1A68     		ldr	r2, [r3]
 188 005a 42F08072 		orr	r2, r2, #16777216
 189 005e 1A60     		str	r2, [r3]
 190              	.L14:
 197:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   while (!(RCC->CR & RCC_CR_PLLRDY))
 191              		.loc 1 197 0 discriminator 1
 192 0060 1A68     		ldr	r2, [r3]
 193 0062 9201     		lsls	r2, r2, #6
 194 0064 FCD5     		bpl	.L14
 198:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ;                                       /* Waits until PLL is stable.   */
 199:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
 200:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 201:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Flash setup and final clock selection.   */
 202:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   FLASH->ACR = STM32_FLASHBITS;
 195              		.loc 1 202 0
 196 0066 094A     		ldr	r2, .L26+8
 197 0068 1221     		movs	r1, #18
 198 006a 1160     		str	r1, [r2]
 203:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 204:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Switching to the configured clock source if it is different from HSI.*/
 205:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #if (STM32_SW != STM32_SW_HSI)
 206:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* Switches clock source.*/
 207:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR |= STM32_SW;
 199              		.loc 1 207 0
 200 006c 5A68     		ldr	r2, [r3, #4]
 201 006e 42F00202 		orr	r2, r2, #2
 202 0072 5A60     		str	r2, [r3, #4]
 203              	.L15:
 208:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   while ((RCC->CFGR & RCC_CFGR_SWS) != (STM32_SW << 2))
 204              		.loc 1 208 0 discriminator 1
 205 0074 5A68     		ldr	r2, [r3, #4]
 206 0076 02F00C02 		and	r2, r2, #12
 207 007a 082A     		cmp	r2, #8
 208 007c FAD1     		bne	.L15
 209:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****     ;                                       /* Waits selection complete.    */
 210:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif
 211:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** 
 212:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   /* After PLL activation because the special requirements for TIM1 and
 213:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****      TIM8 bits.*/
 214:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c ****   RCC->CFGR3 |= STM32_TIM8SW | STM32_TIM1SW;
 209              		.loc 1 214 0
 210 007e 1A6B     		ldr	r2, [r3, #48]
 211 0080 1A63     		str	r2, [r3, #48]
 215:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** #endif /* !STM32_NO_INIT */
 216:lib/chibios/os/hal/ports/STM32/STM32F3xx/hal_lld.c **** }
 212              		.loc 1 216 0
 213 0082 7047     		bx	lr
 214              	.L27:
 215              		.align	2
 216              	.L26:
 217 0084 00100240 		.word	1073876992
 218 0088 00241D00 		.word	1909760
 219 008c 00200240 		.word	1073881088
 220              		.cfi_endproc
 221              	.LFE281:
 223              		.global	SystemCoreClock
 224              		.section	.data.SystemCoreClock,"aw",%progbits
 225              		.align	2
 228              	SystemCoreClock:
 229 0000 00A24A04 		.word	72000000
 230              		.text
 231              	.Letext0:
 232              		.file 2 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h
 233              		.file 3 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/machine/_default_types
 234              		.file 4 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/sys/_stdint.h"
 235              		.file 5 "./lib/chibios/os/common/ports/ARMCMx/compilers/GCC/chtypes.h"
 236              		.file 6 "./lib/chibios/os/rt/include/chsystypes.h"
 237              		.file 7 "./lib/chibios/os/rt/include/chschd.h"
 238              		.file 8 "./lib/chibios/os/common/ext/CMSIS/include/core_cm4.h"
 239              		.file 9 "./lib/chibios/os/common/ext/CMSIS/ST/STM32F3xx/system_stm32f3xx.h"
 240              		.file 10 "./lib/chibios/os/common/ext/CMSIS/ST/STM32F3xx/stm32f303xc.h"
 241              		.file 11 "./lib/chibios/os/common/ports/ARMCMx/chcore.h"
 242              		.file 12 "./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h"
 243              		.file 13 "./lib/chibios/os/hal/ports/STM32/LLD/TIMv1/stm32_tim.h"
 244              		.file 14 "./lib/chibios/os/rt/include/chtm.h"
 245              		.file 15 "./lib/chibios/os/rt/include/chsem.h"
 246              		.file 16 "./lib/chibios/os/rt/include/chmtx.h"
 247              		.file 17 "./lib/chibios/os/rt/include/chsys.h"
 248              		.file 18 "./lib/chibios/os/rt/include/chregistry.h"
 249              		.file 19 "./lib/chibios/os/common/oslib/include/chmemcore.h"
 250              		.file 20 "./lib/chibios/os/hal/ports/STM32/LLD/DMAv1/stm32_dma.h"
 251              		.file 21 "./lib/chibios/os/hal/ports/STM32/LLD/GPIOv2/hal_pal_lld.h"
 252              		.file 22 "./lib/chibios/os/hal/include/hal_dac.h"
 253              		.file 23 "./lib/chibios/os/hal/ports/STM32/LLD/DACv1/hal_dac_lld.h"
 254              		.file 24 "./lib/chibios/os/hal/include/hal_gpt.h"
 255              		.file 25 "./lib/chibios/os/hal/ports/STM32/LLD/TIMv1/hal_gpt_lld.h"
 256              		.file 26 "./lib/chibios/os/hal/include/hal_i2c.h"
 257              		.file 27 "./lib/chibios/os/hal/ports/STM32/LLD/I2Cv2/hal_i2c_lld.h"
 258              		.file 28 "./lib/chibios/os/hal/include/hal_pwm.h"
 259              		.file 29 "./lib/chibios/os/hal/ports/STM32/LLD/TIMv1/hal_pwm_lld.h"
 260              		.file 30 "./lib/chibios/os/hal/include/hal_usb.h"
 261              		.file 31 "./lib/chibios/os/hal/ports/STM32/LLD/USBv1/hal_usb_lld.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 hal_lld.c
/var/tmp//ccryqcOG.s:16     .text.hal_lld_init:0000000000000000 $t
/var/tmp//ccryqcOG.s:23     .text.hal_lld_init:0000000000000000 hal_lld_init
/var/tmp//ccryqcOG.s:110    .text.hal_lld_init:0000000000000070 $d
/var/tmp//ccryqcOG.s:117    .text.stm32_clock_init:0000000000000000 $t
/var/tmp//ccryqcOG.s:124    .text.stm32_clock_init:0000000000000000 stm32_clock_init
/var/tmp//ccryqcOG.s:217    .text.stm32_clock_init:0000000000000084 $d
/var/tmp//ccryqcOG.s:228    .data.SystemCoreClock:0000000000000000 SystemCoreClock
/var/tmp//ccryqcOG.s:225    .data.SystemCoreClock:0000000000000000 $d

UNDEFINED SYMBOLS
dmaInit
